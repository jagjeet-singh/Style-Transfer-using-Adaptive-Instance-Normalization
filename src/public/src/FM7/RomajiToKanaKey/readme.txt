ローマ字→カナキーコンバータ

by 山川機長
http://www.ysflight.com





[はじめに]

このプログラムは、コマンド入力型レトロアドベンチャーゲームでカナキー入力が必要になったとき、ローマ字でタイプすると、どのキーを押せばよいのか表示します。

エミュレータでレトロアドベンチャーゲームを30年ぶりにやってみたくなった僕のような中年のオッサンでアルファベットと数字はタイプできてもカナキーがタイプできない人もこれで解決。

長いことうちに眠っていたFM7用「テラ4001」テープ版を、最新技術(?)を駆使してXM7上で動くようにしたとき、最後まで行けるか確認したかったがカナ入力ができない。しかも使ってるのがUSキーボードだからカナの刻印すらない。この状況を打開するにはC++しかない。ローマ字をカナキーに翻訳するプログラムを書くしかない。と思って書きました。なお、「テラ4001」はネット上の攻略情報を見ながら無事エンディングまで3時間ほどでたどりつきました。

たとえば、このプログラムのウィンドウに、

    tekkadonn

とタイプすると、

    W
    Shift+Z
    T
    S
    @
    Y

と翻訳してくれるので、カナモードにしてその通りタイプすると8ビット機上で「テッカドン」と入力できます。なおUSキーボードモードでは「@」は「]」に表示が変わります。

あるいは、

    aomorikenhirosakishi

とタイプすると、

    3
    6
    M
    L
    :
    Y
    V
    "(\)
    X
    G
    D

と翻訳するので、その通りタイプすると「アオモリケンヒロサキシ」と入力できます。なおUSキーボードモードでは、「:」は「'」に、「"」は存在しないので「Not Exist!」と表示します。「"」ですが、FM7シリーズではキーボード右下、右シフトキーのすぐ左のキーで一発で「"」を入力するキーでした。が、JISキーボードではバックスラッシュに対応しているっぽいので両方表示します。

なお、一単語タイプが終わったら、Enterキーを押すか、CLEARボタンをクリックすると入力内容が消えます。バックスペース連打でもいいです。





[カタカナの「ロ」と「メ」について]

日本語キーボードだと、「ロ」は右シフトキーのすぐ左のバックスラッシュキーに対応しているようです。昔のレトロPCだとその位置には「"」(一発でダブルクオートーが打てた)があったので、このプログラムは「"」と表示します。が、USキーボードにはそのキーは存在しません。USキーボードを実機にキーボードコンバータで接続しているような場合は「ロ」の入力は不可能です。同じ理由で「ム」も入力できません。「ム」は日本語キーボードだと「]」に対応しますが、USキーボードの「]」は日本語キーボードの「@」に対応していて、日本語キーボードの「]」にあたる位置にはUSキーボードのキーはありません。実機でカナ入力が必要な時はJISキーボードを使いましょう。

USキーボードでエミュレータを実行している場合だと、別のキーを割り当てましょう。XM7だと、デフォルトPage Up/Page DownがCLSとHOMEに対応していて、このふたつはあまり使わないので、「"」(0x34)と「]」(0x29)に割り当ててしまうと良いと思います。とりあえず僕はそのようにしてしのぎました。

なお、USキーボードモードでro、muをタイプすると「Not Exist!」と表示します。どのキーに割り当てたかは、たったふたつなので、覚えてください。

